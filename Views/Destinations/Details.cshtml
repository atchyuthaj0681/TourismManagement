@model TourismManagement.Models.Destination

@{
    ViewData["Title"] = "Destination Details";
}

<h1 class="mt-4">@Model.Name</h1>

<!-- Display Destination Images -->
@if (Model.Images != null && Model.Images.Any())
{
    <h3 class="mt-4">Gallery</h3>
    <div class="row mb-3">
        @foreach (var image in Model.Images)
        {
            <div class="col-md-3 mb-3">
                <img src="@image.ImageUrl" class="img-fluid rounded shadow-sm" alt="Image of @Model.Name" />
            </div>
        }
    </div>
}
else
{
    <p><em>No images uploaded for this destination.</em></p>
}

<hr />

<!-- Destination Info -->
<div class="mb-3">
    <p><strong>Category:</strong> @Model.Category</p>
    <p><strong>Description:</strong></p>
    <p>@Model.Description</p>
    <p><strong>Price:</strong> @Model.Price.ToString("C")</p>
    <p><strong>Best Time to Visit:</strong> @Model.BestTimeToVisit</p>
    <p><strong>Duration:</strong> @Model.DurationDays days</p>
</div>

<hr />

<!-- Rating Form -->
@if (User.Identity.IsAuthenticated)
{
    <h4>Rate this Destination</h4>
    <form asp-action="RateDestination" method="post">
        <input type="hidden" name="id" value="@Model.Id" />

        <div class="form-group">
            <label for="rating">Rating (1-5):</label>
            <input type="number" name="rating" min="1" max="5" class="form-control" required />
        </div>

        <div class="form-group">
            <label for="review">Review:</label>
            <textarea name="review" rows="3" class="form-control"></textarea>
        </div>

        <button type="submit" class="btn btn-primary mt-2">Submit Rating</button>
    </form>
}
else
{
    <p><em>Please <a href="/Identity/Account/Login">log in</a> to rate this destination.</em></p>
}

<hr />

<!-- Navigation Buttons -->
<a asp-action="Index" class="btn btn-secondary mt-3">Back to List</a>

@if (User.IsInRole("Admin"))
{
    <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-warning mt-3 ml-2">Edit</a>

    <form asp-action="Delete" asp-route-id="@Model.Id" method="post" class="d-inline ml-2" onsubmit="return confirm('Are you sure you want to delete this destination?');">
        <button type="submit" class="btn btn-danger mt-3">Delete</button>
    </form>
}
